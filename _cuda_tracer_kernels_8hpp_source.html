<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>NTrace: src/rt/kernels/CudaTracerKernels.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NTrace
   </div>
   <div id="projectbrief">GPU ray tracing framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_cuda_tracer_kernels_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CudaTracerKernels.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_cuda_tracer_kernels_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  Copyright (c) 2009-2011, NVIDIA Corporation</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *      * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *        notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *      * Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *        notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *        documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *      * Neither the name of NVIDIA Corporation nor the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *        names of its contributors may be used to endorse or promote products</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *        derived from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *  DISCLAIMED. IN NO EVENT SHALL &lt;COPYRIGHT HOLDER&gt; BE LIABLE FOR ANY</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;cuda.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// Constants.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">enum</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9eaaf150cd6d16bc68cd119ce4208563009">   37</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9eaaf150cd6d16bc68cd119ce4208563009">MaxBlockHeight</a>      = 6,            <span class="comment">// Upper bound for blockDim.y.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9ea288367d76e92c0d5f020b21c5d531d9a">   38</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9ea288367d76e92c0d5f020b21c5d531d9a">EntrypointSentinel</a>  = 0x76543210,   <span class="comment">// Bottom-most stack entry, indicating the end of traversal.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;};</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// Macros for kd-tree build and traversal</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a5f141dcf36f8141ef1839166bf6d0d73">   42</a></span>&#160;<span class="preprocessor">#define KDTREE_MASK 0xF0000000 // Binary flag mask</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#aba22a25e4d6ee4211cdfe0f6708a9112">   43</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define KDTREE_UNMASK 0x0FFFFFFF // Mask for removing the flags</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a5161d12774518630e95ab89c11bf3535">   44</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define KDTREE_LEAF 0xC0000000 // Leaf binary flag</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a10826adc529daa36387a470ded14e64a">   45</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define KDTREE_EMPTYLEAF 0x80000000 // Leaf binary flag</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a6b1f4931ab5f35c02d512e41085bf4de">   46</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define KDTREE_DIMPOS 28</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// BVH memory layout.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bf">   52</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bf">BVHLayout</a></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfabb4caef31057de56aee0f49a3083e4b4">   54</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfabb4caef31057de56aee0f49a3083e4b4">BVHLayout_AOS_AOS</a> = 0,              <span class="comment">// Nodes = array-of-structures, triangles = array-of-structures. Used by tesla_xxx kernels.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa9ff9a18b9570cdf01d262c7a5bf53be5">   55</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa9ff9a18b9570cdf01d262c7a5bf53be5">BVHLayout_AOS_SOA</a>,                  <span class="comment">// Nodes = array-of-structures, triangles = structure-of-arrays.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa13bd35ff8b411461e0887642f8d0e183">   56</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa13bd35ff8b411461e0887642f8d0e183">BVHLayout_SOA_AOS</a>,                  <span class="comment">// Nodes = structure-of-arrays, triangles = array-of-structures.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa89bec8512000b7968cdbcaf47cc59cec">   57</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa89bec8512000b7968cdbcaf47cc59cec">BVHLayout_SOA_SOA</a>,                  <span class="comment">// Nodes = structure-of-arrays, triangles = structure-of-arrays.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfaf828e6d01f270b4f72e55fe4712ff8f1">   58</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfaf828e6d01f270b4f72e55fe4712ff8f1">BVHLayout_Compact</a>,                  <span class="comment">// Variant of BVHLayout_AOS_AOS with implicit leaf nodes.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa97495bd3c6fc5d87960518b8916c6438">   59</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa97495bd3c6fc5d87960518b8916c6438">BVHLayout_Compact2</a>,                 <span class="comment">// Variant of BVHLayout_AOS_AOS with implicit leaf nodes.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfae447180866a3b3cf9cfd32808af17a37">   60</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfae447180866a3b3cf9cfd32808af17a37">BVHLayout_CPU</a>,                      <span class="comment">// Variant of BVHLayout_AOS_AOS without woop triangles, suitable for low memory CPU traversal</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa0bac0eb093720196cf04606d3b39a38d">   62</a></span>&#160;    <a class="code" href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa0bac0eb093720196cf04606d3b39a38d">BVHLayout_Max</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;};</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// Kernel configuration. Written by queryConfig() in each CU file.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_kernel_config.html">   69</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_kernel_config.html">KernelConfig</a></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_kernel_config.html#a8a237729316298a3e83e133636985d1b">   71</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="struct_kernel_config.html#a8a237729316298a3e83e133636985d1b">bvhLayout</a>;              <span class="comment">// Desired BVHLayout.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_kernel_config.html#a3fd2ccf473bceeb02917a801ee60cb02">   72</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="struct_kernel_config.html#a3fd2ccf473bceeb02917a801ee60cb02">blockWidth</a>;             <span class="comment">// Desired blockDim.x.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_kernel_config.html#a626bc913ad382c690fb5046d75237254">   73</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="struct_kernel_config.html#a626bc913ad382c690fb5046d75237254">blockHeight</a>;            <span class="comment">// Desired blockDim.y.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_kernel_config.html#a21a7a35f34515a950187415244d0ae7a">   74</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="struct_kernel_config.html#a21a7a35f34515a950187415244d0ae7a">usePersistentThreads</a>;   <span class="comment">// True to enable persistent threads.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;};</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// Function signature for trace().</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#aec7e24f976f59490b795f5f515a34cb2">   81</a></span>&#160;<span class="preprocessor">#define TRACE_FUNC_KDTREE \</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">    extern &quot;C&quot; __global__ void trace_kdtree( \</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">        int             numRays,        </span><span class="comment">/* Total number of rays in the batch. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">        bool            anyHit,         </span><span class="comment">/* False if rays need to find the closest hit. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">        float*          bmin,   \</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">        float*          bmax,   \</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">        float           delta,  \</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">        float4*         rays,           </span><span class="comment">/* Ray input: float3 origin, float tmin, float3 direction, float tmax. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">        int4*           results,        </span><span class="comment">/* Ray output: int triangleID, float hitT, int2 padding. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">        float4*         nodesA,         </span><span class="comment">/* SOA: bytes 0-15 of each node, AOS/Compact: 64 bytes per node. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">        float4*         nodesB,         </span><span class="comment">/* SOA: bytes 16-31 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">        float4*         nodesC,         </span><span class="comment">/* SOA: bytes 32-47 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">        float4*         nodesD,         </span><span class="comment">/* SOA: bytes 48-63 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">        float4*         trisA,          </span><span class="comment">/* SOA: bytes 0-15 of each triangle, AOS: 64 bytes per triangle, Compact: 48 bytes per triangle. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">        float4*         trisB,          </span><span class="comment">/* SOA: bytes 16-31 of each triangle, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">        float4*         trisC,          </span><span class="comment">/* SOA: bytes 32-47 of each triangle, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">        int*            triIndices)     </span><span class="comment">/* Triangle index remapping table. */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a30e2ddf02b350e79b7c8fdc7291ab11f">   99</a></span>&#160;<span class="preprocessor">#define TRACE_FUNC_BVH \</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">    extern &quot;C&quot; __global__ void trace_bvh( \</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">        int             numRays,        </span><span class="comment">/* Total number of rays in the batch. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">        bool            anyHit,         </span><span class="comment">/* False if rays need to find the closest hit. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">        float4*         rays,           </span><span class="comment">/* Ray input: float3 origin, float tmin, float3 direction, float tmax. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">        int4*           results,        </span><span class="comment">/* Ray output: int triangleID, float hitT, int2 padding. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">        float4*         nodesA,         </span><span class="comment">/* SOA: bytes 0-15 of each node, AOS/Compact: 64 bytes per node. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">        float4*         nodesB,         </span><span class="comment">/* SOA: bytes 16-31 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">        float4*         nodesC,         </span><span class="comment">/* SOA: bytes 32-47 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">        float4*         nodesD,         </span><span class="comment">/* SOA: bytes 48-63 of each node, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">        float4*         trisA,          </span><span class="comment">/* SOA: bytes 0-15 of each triangle, AOS: 64 bytes per triangle, Compact: 48 bytes per triangle. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">        float4*         trisB,          </span><span class="comment">/* SOA: bytes 16-31 of each triangle, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">        float4*         trisC,          </span><span class="comment">/* SOA: bytes 32-47 of each triangle, AOS/Compact: unused. */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">        int*            triIndices)     </span><span class="comment">/* Triangle index remapping table. */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// OTrace input</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="struct_otrace_input.html">  117</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_otrace_input.html">OtraceInput</a></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aebe74d71dce6935268bdbc8cafbbcb17">  119</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_otrace_input.html#aebe74d71dce6935268bdbc8cafbbcb17">numRays</a>;            <span class="comment">/* Total number of rays in the batch. */</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aa1434b23ffa9b5701c443a541c887883">  120</a></span>&#160;    <span class="keywordtype">bool</span>            <a class="code" href="struct_otrace_input.html#aa1434b23ffa9b5701c443a541c887883">anyHit</a>;             <span class="comment">/* False if rays need to find the closest hit. */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a1298cc3d5e36e840c415169c1221159b">  121</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a1298cc3d5e36e840c415169c1221159b">rays</a>;               <span class="comment">/* Ray input: float3 origin, float tmin, float3 direction, float tmax. */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#acf9a0c500b56b7f1f438e485ffc6d3bd">  122</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#acf9a0c500b56b7f1f438e485ffc6d3bd">results</a>;            <span class="comment">/* Ray output: int triangleID, float hitT, int2 padding. */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a1019c29d50ce0f80dea92ba4ac295378">  123</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a1019c29d50ce0f80dea92ba4ac295378">nodesA</a>;             <span class="comment">/* SOA: bytes 0-15 of each node, AOS/Compact: 64 bytes per node. */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a8c3b19f1c73f1ae79e4c325d0124a7ca">  124</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a8c3b19f1c73f1ae79e4c325d0124a7ca">nodesB</a>;             <span class="comment">/* SOA: bytes 16-31 of each node, AOS/Compact: unused. */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a3cb0a2d8532b15e5f8d22ead38bc7d68">  125</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a3cb0a2d8532b15e5f8d22ead38bc7d68">nodesC</a>;             <span class="comment">/* SOA: bytes 32-47 of each node, AOS/Compact: unused. */</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aeadc26a3f69cdf9f5f5f00f626f43f0a">  126</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#aeadc26a3f69cdf9f5f5f00f626f43f0a">nodesD</a>;             <span class="comment">/* SOA: bytes 48-63 of each node, AOS/Compact: unused. */</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a439026f46ddce1123216b3d3acac3771">  127</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a439026f46ddce1123216b3d3acac3771">trisA</a>;              <span class="comment">/* SOA: bytes 0-15 of each triangle, AOS: 64 bytes per triangle, Compact: 48 bytes per triangle. */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aa5b2db172c955a5baf0a4dba233f1444">  128</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#aa5b2db172c955a5baf0a4dba233f1444">trisB</a>;              <span class="comment">/* SOA: bytes 16-31 of each triangle, AOS/Compact: unused. */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aa1b245a2e95a2d71d2029ac20cc5b372">  129</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#aa1b245a2e95a2d71d2029ac20cc5b372">trisC</a>;              <span class="comment">/* SOA: bytes 32-47 of each triangle, AOS/Compact: unused. */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#ab713dde91ca82a22a51aaf0c285a3b32">  130</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#ab713dde91ca82a22a51aaf0c285a3b32">triIndices</a>;         <span class="comment">/* Triangle index remapping table. */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#aaf528bff37e8783ae3a4efdfdaa1a6ff">  131</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#aaf528bff37e8783ae3a4efdfdaa1a6ff">texCoords</a>;          <span class="comment">/* Texture coordinates */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a39096f43f2c7c4d0971b84ce534fdbbc">  132</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a39096f43f2c7c4d0971b84ce534fdbbc">normals</a>;            <span class="comment">/* Normals */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a7c731d7f324cf7745f47c64d910cce8b">  133</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a7c731d7f324cf7745f47c64d910cce8b">triVertIndex</a>;       <span class="comment">/* Triangle vertex index */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a6f610fb1a052cbc60c23183b31a7c565">  134</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a6f610fb1a052cbc60c23183b31a7c565">atlasInfo</a>;          <span class="comment">/* Texture atlas */</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#abfa59f0c99dceb933ad2bff7f8f2de0d">  135</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#abfa59f0c99dceb933ad2bff7f8f2de0d">matId</a>;              <span class="comment">/* Material ID */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="struct_otrace_input.html#a1d8d4e922f8a299f4c5b0bc7ed595d14">  136</a></span>&#160;    CUdeviceptr     <a class="code" href="struct_otrace_input.html#a1d8d4e922f8a299f4c5b0bc7ed595d14">matInfo</a>;            <span class="comment">/* Material data */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;};</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Temporary data stored in shared memory to reduce register pressure.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="struct_ray_struct.html">  143</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_ray_struct.html">RayStruct</a></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="struct_ray_struct.html#af8a90903a19dd88f84a3e3d676fc48a9">  145</a></span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="struct_ray_struct.html#af8a90903a19dd88f84a3e3d676fc48a9">idirx</a>;  <span class="comment">// 1.0f / ray.direction.x</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="struct_ray_struct.html#ab26adeafe411ec1ae1d0cd8495ee902c">  146</a></span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="struct_ray_struct.html#ab26adeafe411ec1ae1d0cd8495ee902c">idiry</a>;  <span class="comment">// 1.0f / ray.direction.y</span></div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="struct_ray_struct.html#a71d99b92aed876563a2a2804dc074d9a">  147</a></span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="struct_ray_struct.html#a71d99b92aed876563a2a2804dc074d9a">idirz</a>;  <span class="comment">// 1.0f / ray.direction.z</span></div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="struct_ray_struct.html#a6c574003e78283ac86e276a24a18baf0">  148</a></span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="struct_ray_struct.html#a6c574003e78283ac86e276a24a18baf0">tmin</a>;   <span class="comment">// ray.tmin</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="struct_ray_struct.html#a2be0c7c9dba42b601962e17801072c83">  149</a></span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="struct_ray_struct.html#a2be0c7c9dba42b601962e17801072c83">dummy</a>;  <span class="comment">// Padding to avoid bank conflicts.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;};</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// Globals.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#ifdef __CUDACC__</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;__device__ <a class="code" href="struct_kernel_config.html">KernelConfig</a> g_config;   <span class="comment">// Output of queryConfig().</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;texture&lt;float4, 1&gt; t_rays;          <span class="comment">// Linear textures wrapping the corresponding parameter arrays.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;texture&lt;float4, 1&gt; t_nodesA;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;texture&lt;float4, 1&gt; t_nodesB;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;texture&lt;float4, 1&gt; t_nodesC;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;texture&lt;float4, 1&gt; t_nodesD;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;texture&lt;float4, 1&gt; t_trisA;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;texture&lt;float4, 1&gt; t_trisB;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;texture&lt;float4, 1&gt; t_trisC;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;texture&lt;int,  1&gt;   t_triIndices;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;__global__ <span class="keywordtype">void</span> queryConfig(<span class="keywordtype">void</span>);  <span class="comment">// Launched once when the kernel is loaded.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="_cuda_tracer_kernels_8hpp.html#a30e2ddf02b350e79b7c8fdc7291ab11f">TRACE_FUNC_BVH</a>;                     <span class="comment">// Launched for each batch of rays.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<a class="code" href="_cuda_tracer_kernels_8hpp.html#aec7e24f976f59490b795f5f515a34cb2">TRACE_FUNC_KDTREE</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;__constant__ <a class="code" href="struct_otrace_input.html">OtraceInput</a> c_OtraceInput;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;__global__ <span class="keywordtype">void</span> otrace_kernel(<span class="keywordtype">void</span>); <span class="comment">// Otrace kernel</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;texture&lt;float4, 2&gt; t_textureAtlas;  <span class="comment">// texture atlases</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// Utilities.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#ad9f1bf2fdf3e18ad36a84dfa04b580b5">  188</a></span>&#160;<span class="preprocessor">#define FETCH_GLOBAL(NAME, IDX, TYPE) ((const TYPE*)NAME)[IDX]</span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a32c104884fbabfd12ec952683e8bbefd">  189</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define FETCH_TEXTURE(NAME, IDX, TYPE) tex1Dfetch(t_ ## NAME, IDX)</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor"></span><span class="comment">//#define STORE_RESULT(RAY, TRI, T) ((int2*)results)[(RAY) * 2] = make_int2(TRI, __float_as_int(T))</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="_cuda_tracer_kernels_8hpp.html#a34b2f69de6e452310f1ba06e16e13dd9">  191</a></span>&#160;<span class="preprocessor">#define STORE_RESULT(RAY, TRI, T, U, V) results[RAY] = make_int4(TRI, __float_as_int(T), __float_as_int(U), __float_as_int(V))</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#ifdef __CUDACC__</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; __device__ __inline__ <span class="keywordtype">void</span> <a class="code" href="namespace_f_w.html#a8ad58a68ee61cc70a065d5951ccbd99f">swap</a>(T&amp; a,T&amp; b)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    T t = a;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    a = b;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    b = t;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> min4(<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c, <span class="keywordtype">float</span> d)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> fminf(fminf(fminf(a, b), c), d);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> max4(<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c, <span class="keywordtype">float</span> d)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> fmaxf(fmaxf(fmaxf(a, b), c), d);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> min3(<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> fminf(fminf(a, b), c);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> max3(<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> fmaxf(fmaxf(a, b), c);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">// Using integer min,max</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;__inline__ __device__ <span class="keywordtype">float</span> fminf2(<span class="keywordtype">float</span> a,<span class="keywordtype">float</span> b)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">int</span> a2 = __float_as_int(a);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">int</span> b2 = __float_as_int(b);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> __int_as_float( a2&lt;b2 ? a2 : b2 );</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;__inline__ __device__ <span class="keywordtype">float</span> fmaxf2(<span class="keywordtype">float</span> a,<span class="keywordtype">float</span> b)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">int</span> a2 = __float_as_int(a);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">int</span> b2 = __float_as_int(b);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> __int_as_float( a2&gt;b2 ? a2 : b2 );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// Using video instructions</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;__device__ __inline__ <span class="keywordtype">int</span>   min_min   (<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b, <span class="keywordtype">int</span> c) { <span class="keywordtype">int</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; <span class="keyword">asm</span>(<span class="stringliteral">&quot;vmin.s32.s32.s32.min %0, %1, %2, %3;&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(<a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b), <span class="stringliteral">&quot;r&quot;</span>(c)); <span class="keywordflow">return</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;__device__ __inline__ <span class="keywordtype">int</span>   min_max   (<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b, <span class="keywordtype">int</span> c) { <span class="keywordtype">int</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; <span class="keyword">asm</span>(<span class="stringliteral">&quot;vmin.s32.s32.s32.max %0, %1, %2, %3;&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(<a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b), <span class="stringliteral">&quot;r&quot;</span>(c)); <span class="keywordflow">return</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;__device__ __inline__ <span class="keywordtype">int</span>   max_min   (<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b, <span class="keywordtype">int</span> c) { <span class="keywordtype">int</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; <span class="keyword">asm</span>(<span class="stringliteral">&quot;vmax.s32.s32.s32.min %0, %1, %2, %3;&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(<a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b), <span class="stringliteral">&quot;r&quot;</span>(c)); <span class="keywordflow">return</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;__device__ __inline__ <span class="keywordtype">int</span>   max_max   (<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b, <span class="keywordtype">int</span> c) { <span class="keywordtype">int</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; <span class="keyword">asm</span>(<span class="stringliteral">&quot;vmax.s32.s32.s32.max %0, %1, %2, %3;&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(<a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b), <span class="stringliteral">&quot;r&quot;</span>(c)); <span class="keywordflow">return</span> <a class="code" href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a>; }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> fmin_fmin (<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c) { <span class="keywordflow">return</span> __int_as_float(min_min(__float_as_int(a), __float_as_int(b), __float_as_int(c))); }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> fmin_fmax (<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c) { <span class="keywordflow">return</span> __int_as_float(min_max(__float_as_int(a), __float_as_int(b), __float_as_int(c))); }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> fmax_fmin (<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c) { <span class="keywordflow">return</span> __int_as_float(max_min(__float_as_int(a), __float_as_int(b), __float_as_int(c))); }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> fmax_fmax (<span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c) { <span class="keywordflow">return</span> __int_as_float(max_max(__float_as_int(a), __float_as_int(b), __float_as_int(c))); }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> magic_max7(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordtype">float</span> t1 = fmin_fmax(a0, a1, d);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordtype">float</span> t2 = fmin_fmax(b0, b1, t1);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordtype">float</span> t3 = fmin_fmax(c0, c1, t2);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">return</span> t3;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> magic_min7(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordtype">float</span> t1 = fmax_fmin(a0, a1, d);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordtype">float</span> t2 = fmax_fmin(b0, b1, t1);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordtype">float</span> t3 = fmax_fmin(c0, c1, t2);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">return</span> t3;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">// Experimentally determined best mix of float/int/video minmax instructions for Kepler.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> spanBeginKepler(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d){   <span class="keywordflow">return</span> fmax_fmax( fminf(a0,a1), fminf(b0,b1), fmin_fmax(c0, c1, d)); }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> spanEndKepler(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d)  {   <span class="keywordflow">return</span> fmin_fmin( fmaxf(a0,a1), fmaxf(b0,b1), fmax_fmin(c0, c1, d)); }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">// Same for Fermi.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> spanBeginFermi(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d) {   <span class="keywordflow">return</span> magic_max7(a0, a1, b0, b1, c0, c1, d); }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;__device__ __inline__ <span class="keywordtype">float</span> spanEndFermi(<span class="keywordtype">float</span> a0, <span class="keywordtype">float</span> a1, <span class="keywordtype">float</span> b0, <span class="keywordtype">float</span> b1, <span class="keywordtype">float</span> c0, <span class="keywordtype">float</span> c1, <span class="keywordtype">float</span> d)   {   <span class="keywordflow">return</span> magic_min7(a0, a1, b0, b1, c0, c1, d); }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="ttc" id="struct_ray_struct_html_a71d99b92aed876563a2a2804dc074d9a"><div class="ttname"><a href="struct_ray_struct.html#a71d99b92aed876563a2a2804dc074d9a">RayStruct::idirz</a></div><div class="ttdeci">float idirz</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00147">CudaTracerKernels.hpp:147</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aa1434b23ffa9b5701c443a541c887883"><div class="ttname"><a href="struct_otrace_input.html#aa1434b23ffa9b5701c443a541c887883">OtraceInput::anyHit</a></div><div class="ttdeci">bool anyHit</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00120">CudaTracerKernels.hpp:120</a></div></div>
<div class="ttc" id="struct_kernel_config_html"><div class="ttname"><a href="struct_kernel_config.html">KernelConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00069">CudaTracerKernels.hpp:69</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a39096f43f2c7c4d0971b84ce534fdbbc"><div class="ttname"><a href="struct_otrace_input.html#a39096f43f2c7c4d0971b84ce534fdbbc">OtraceInput::normals</a></div><div class="ttdeci">CUdeviceptr normals</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00132">CudaTracerKernels.hpp:132</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aa1b245a2e95a2d71d2029ac20cc5b372"><div class="ttname"><a href="struct_otrace_input.html#aa1b245a2e95a2d71d2029ac20cc5b372">OtraceInput::trisC</a></div><div class="ttdeci">CUdeviceptr trisC</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00129">CudaTracerKernels.hpp:129</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a1d8d4e922f8a299f4c5b0bc7ed595d14"><div class="ttname"><a href="struct_otrace_input.html#a1d8d4e922f8a299f4c5b0bc7ed595d14">OtraceInput::matInfo</a></div><div class="ttdeci">CUdeviceptr matInfo</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00136">CudaTracerKernels.hpp:136</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aeadc26a3f69cdf9f5f5f00f626f43f0a"><div class="ttname"><a href="struct_otrace_input.html#aeadc26a3f69cdf9f5f5f00f626f43f0a">OtraceInput::nodesD</a></div><div class="ttdeci">CUdeviceptr nodesD</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00126">CudaTracerKernels.hpp:126</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a7c731d7f324cf7745f47c64d910cce8b"><div class="ttname"><a href="struct_otrace_input.html#a7c731d7f324cf7745f47c64d910cce8b">OtraceInput::triVertIndex</a></div><div class="ttdeci">CUdeviceptr triVertIndex</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00133">CudaTracerKernels.hpp:133</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bf"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bf">BVHLayout</a></div><div class="ttdeci">BVHLayout</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00052">CudaTracerKernels.hpp:52</a></div></div>
<div class="ttc" id="struct_kernel_config_html_a626bc913ad382c690fb5046d75237254"><div class="ttname"><a href="struct_kernel_config.html#a626bc913ad382c690fb5046d75237254">KernelConfig::blockHeight</a></div><div class="ttdeci">int blockHeight</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00073">CudaTracerKernels.hpp:73</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_aec7e24f976f59490b795f5f515a34cb2"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#aec7e24f976f59490b795f5f515a34cb2">TRACE_FUNC_KDTREE</a></div><div class="ttdeci">#define TRACE_FUNC_KDTREE</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00081">CudaTracerKernels.hpp:81</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a439026f46ddce1123216b3d3acac3771"><div class="ttname"><a href="struct_otrace_input.html#a439026f46ddce1123216b3d3acac3771">OtraceInput::trisA</a></div><div class="ttdeci">CUdeviceptr trisA</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00127">CudaTracerKernels.hpp:127</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a8c3b19f1c73f1ae79e4c325d0124a7ca"><div class="ttname"><a href="struct_otrace_input.html#a8c3b19f1c73f1ae79e4c325d0124a7ca">OtraceInput::nodesB</a></div><div class="ttdeci">CUdeviceptr nodesB</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00124">CudaTracerKernels.hpp:124</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a3cb0a2d8532b15e5f8d22ead38bc7d68"><div class="ttname"><a href="struct_otrace_input.html#a3cb0a2d8532b15e5f8d22ead38bc7d68">OtraceInput::nodesC</a></div><div class="ttdeci">CUdeviceptr nodesC</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00125">CudaTracerKernels.hpp:125</a></div></div>
<div class="ttc" id="struct_otrace_input_html_ab713dde91ca82a22a51aaf0c285a3b32"><div class="ttname"><a href="struct_otrace_input.html#ab713dde91ca82a22a51aaf0c285a3b32">OtraceInput::triIndices</a></div><div class="ttdeci">CUdeviceptr triIndices</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00130">CudaTracerKernels.hpp:130</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfa89bec8512000b7968cdbcaf47cc59cec"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa89bec8512000b7968cdbcaf47cc59cec">BVHLayout_SOA_SOA</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00057">CudaTracerKernels.hpp:57</a></div></div>
<div class="ttc" id="struct_ray_struct_html_af8a90903a19dd88f84a3e3d676fc48a9"><div class="ttname"><a href="struct_ray_struct.html#af8a90903a19dd88f84a3e3d676fc48a9">RayStruct::idirx</a></div><div class="ttdeci">float idirx</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00145">CudaTracerKernels.hpp:145</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a05589fbab0657f08285ebdfe93f5ec9ea288367d76e92c0d5f020b21c5d531d9a"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9ea288367d76e92c0d5f020b21c5d531d9a">EntrypointSentinel</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00038">CudaTracerKernels.hpp:38</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a05589fbab0657f08285ebdfe93f5ec9eaaf150cd6d16bc68cd119ce4208563009"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9eaaf150cd6d16bc68cd119ce4208563009">MaxBlockHeight</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00037">CudaTracerKernels.hpp:37</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfa13bd35ff8b411461e0887642f8d0e183"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa13bd35ff8b411461e0887642f8d0e183">BVHLayout_SOA_AOS</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00056">CudaTracerKernels.hpp:56</a></div></div>
<div class="ttc" id="struct_kernel_config_html_a8a237729316298a3e83e133636985d1b"><div class="ttname"><a href="struct_kernel_config.html#a8a237729316298a3e83e133636985d1b">KernelConfig::bvhLayout</a></div><div class="ttdeci">int bvhLayout</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00071">CudaTracerKernels.hpp:71</a></div></div>
<div class="ttc" id="_d_l_l_imports_8inl_html_aa775029a6efb12d0b0eeef97c1814d04"><div class="ttname"><a href="_d_l_l_imports_8inl.html#aa775029a6efb12d0b0eeef97c1814d04">v</a></div><div class="ttdeci">CUdevice int ordinal char int CUdevice dev CUdevprop CUdevice dev CUcontext ctx CUcontext ctx CUcontext pctx CUmodule const void image CUmodule const void fatCubin CUfunction CUmodule const char name void p CUfunction unsigned int bytes CUtexref pTexRef CUtexref CUarray unsigned int Flags CUtexref int CUaddress_mode am CUtexref unsigned int Flags CUaddress_mode CUtexref int dim CUarray_format int CUtexref hTexRef CUfunction unsigned int numbytes CUfunction int float value CUfunction int CUtexref hTexRef CUfunction int int grid_height CUevent unsigned int Flags CUevent hEvent CUevent hEvent CUstream unsigned int Flags CUstream hStream GLuint bufferobj unsigned int CUdevice dev CUdeviceptr unsigned int CUmodule const char name CUdeviceptr unsigned int bytesize CUdeviceptr dptr void unsigned int bytesize void CUdeviceptr unsigned int ByteCount CUarray unsigned int CUdeviceptr unsigned int ByteCount CUarray unsigned int const void unsigned int ByteCount CUarray unsigned int CUarray unsigned int unsigned int ByteCount void CUarray unsigned int unsigned int CUstream hStream const CUDA_MEMCPY2D pCopy CUdeviceptr const void unsigned int CUstream hStream const CUDA_MEMCPY2D CUstream hStream CUdeviceptr unsigned char unsigned int N CUdeviceptr unsigned int unsigned int N CUdeviceptr unsigned int unsigned short unsigned int unsigned int Height CUarray const CUDA_ARRAY_DESCRIPTOR pAllocateArray CUarray const CUDA_ARRAY3D_DESCRIPTOR pAllocateArray unsigned int CUtexref CUdeviceptr unsigned int bytes CUcontext unsigned int CUdevice device GLenum texture GLenum GLuint buffer GLenum GLuint renderbuffer GLenum GLsizeiptr const GLvoid GLenum usage GLuint shader GLenum type GLsizei const GLuint framebuffers GLsizei const GLuint renderbuffers GLuint v</div><div class="ttdef"><b>Definition:</b> <a href="_d_l_l_imports_8inl_source.html#l00329">DLLImports.inl:329</a></div></div>
<div class="ttc" id="struct_ray_struct_html_a2be0c7c9dba42b601962e17801072c83"><div class="ttname"><a href="struct_ray_struct.html#a2be0c7c9dba42b601962e17801072c83">RayStruct::dummy</a></div><div class="ttdeci">float dummy</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00149">CudaTracerKernels.hpp:149</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a1298cc3d5e36e840c415169c1221159b"><div class="ttname"><a href="struct_otrace_input.html#a1298cc3d5e36e840c415169c1221159b">OtraceInput::rays</a></div><div class="ttdeci">CUdeviceptr rays</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00121">CudaTracerKernels.hpp:121</a></div></div>
<div class="ttc" id="struct_otrace_input_html_abfa59f0c99dceb933ad2bff7f8f2de0d"><div class="ttname"><a href="struct_otrace_input.html#abfa59f0c99dceb933ad2bff7f8f2de0d">OtraceInput::matId</a></div><div class="ttdeci">CUdeviceptr matId</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00135">CudaTracerKernels.hpp:135</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfa97495bd3c6fc5d87960518b8916c6438"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa97495bd3c6fc5d87960518b8916c6438">BVHLayout_Compact2</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00059">CudaTracerKernels.hpp:59</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfaf828e6d01f270b4f72e55fe4712ff8f1"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfaf828e6d01f270b4f72e55fe4712ff8f1">BVHLayout_Compact</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00058">CudaTracerKernels.hpp:58</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfa9ff9a18b9570cdf01d262c7a5bf53be5"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa9ff9a18b9570cdf01d262c7a5bf53be5">BVHLayout_AOS_SOA</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00055">CudaTracerKernels.hpp:55</a></div></div>
<div class="ttc" id="struct_ray_struct_html_ab26adeafe411ec1ae1d0cd8495ee902c"><div class="ttname"><a href="struct_ray_struct.html#ab26adeafe411ec1ae1d0cd8495ee902c">RayStruct::idiry</a></div><div class="ttdeci">float idiry</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00146">CudaTracerKernels.hpp:146</a></div></div>
<div class="ttc" id="struct_ray_struct_html"><div class="ttname"><a href="struct_ray_struct.html">RayStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00143">CudaTracerKernels.hpp:143</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfabb4caef31057de56aee0f49a3083e4b4"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfabb4caef31057de56aee0f49a3083e4b4">BVHLayout_AOS_AOS</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00054">CudaTracerKernels.hpp:54</a></div></div>
<div class="ttc" id="struct_ray_struct_html_a6c574003e78283ac86e276a24a18baf0"><div class="ttname"><a href="struct_ray_struct.html#a6c574003e78283ac86e276a24a18baf0">RayStruct::tmin</a></div><div class="ttdeci">float tmin</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00148">CudaTracerKernels.hpp:148</a></div></div>
<div class="ttc" id="struct_otrace_input_html_acf9a0c500b56b7f1f438e485ffc6d3bd"><div class="ttname"><a href="struct_otrace_input.html#acf9a0c500b56b7f1f438e485ffc6d3bd">OtraceInput::results</a></div><div class="ttdeci">CUdeviceptr results</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00122">CudaTracerKernels.hpp:122</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a30e2ddf02b350e79b7c8fdc7291ab11f"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a30e2ddf02b350e79b7c8fdc7291ab11f">TRACE_FUNC_BVH</a></div><div class="ttdeci">#define TRACE_FUNC_BVH</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00099">CudaTracerKernels.hpp:99</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a1019c29d50ce0f80dea92ba4ac295378"><div class="ttname"><a href="struct_otrace_input.html#a1019c29d50ce0f80dea92ba4ac295378">OtraceInput::nodesA</a></div><div class="ttdeci">CUdeviceptr nodesA</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00123">CudaTracerKernels.hpp:123</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aa5b2db172c955a5baf0a4dba233f1444"><div class="ttname"><a href="struct_otrace_input.html#aa5b2db172c955a5baf0a4dba233f1444">OtraceInput::trisB</a></div><div class="ttdeci">CUdeviceptr trisB</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00128">CudaTracerKernels.hpp:128</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfae447180866a3b3cf9cfd32808af17a37"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfae447180866a3b3cf9cfd32808af17a37">BVHLayout_CPU</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00060">CudaTracerKernels.hpp:60</a></div></div>
<div class="ttc" id="struct_otrace_input_html_a6f610fb1a052cbc60c23183b31a7c565"><div class="ttname"><a href="struct_otrace_input.html#a6f610fb1a052cbc60c23183b31a7c565">OtraceInput::atlasInfo</a></div><div class="ttdeci">CUdeviceptr atlasInfo</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00134">CudaTracerKernels.hpp:134</a></div></div>
<div class="ttc" id="namespace_f_w_html_a8ad58a68ee61cc70a065d5951ccbd99f"><div class="ttname"><a href="namespace_f_w.html#a8ad58a68ee61cc70a065d5951ccbd99f">FW::swap</a></div><div class="ttdeci">FW_CUDA_FUNC void swap(T &amp;a, T &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="_defs_8hpp_source.html#l00183">Defs.hpp:183</a></div></div>
<div class="ttc" id="_cuda_tracer_kernels_8hpp_html_a4340a2ec09290613da89196af6f875bfa0bac0eb093720196cf04606d3b39a38d"><div class="ttname"><a href="_cuda_tracer_kernels_8hpp.html#a4340a2ec09290613da89196af6f875bfa0bac0eb093720196cf04606d3b39a38d">BVHLayout_Max</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00062">CudaTracerKernels.hpp:62</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aaf528bff37e8783ae3a4efdfdaa1a6ff"><div class="ttname"><a href="struct_otrace_input.html#aaf528bff37e8783ae3a4efdfdaa1a6ff">OtraceInput::texCoords</a></div><div class="ttdeci">CUdeviceptr texCoords</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00131">CudaTracerKernels.hpp:131</a></div></div>
<div class="ttc" id="struct_otrace_input_html_aebe74d71dce6935268bdbc8cafbbcb17"><div class="ttname"><a href="struct_otrace_input.html#aebe74d71dce6935268bdbc8cafbbcb17">OtraceInput::numRays</a></div><div class="ttdeci">int numRays</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00119">CudaTracerKernels.hpp:119</a></div></div>
<div class="ttc" id="struct_kernel_config_html_a3fd2ccf473bceeb02917a801ee60cb02"><div class="ttname"><a href="struct_kernel_config.html#a3fd2ccf473bceeb02917a801ee60cb02">KernelConfig::blockWidth</a></div><div class="ttdeci">int blockWidth</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00072">CudaTracerKernels.hpp:72</a></div></div>
<div class="ttc" id="struct_kernel_config_html_a21a7a35f34515a950187415244d0ae7a"><div class="ttname"><a href="struct_kernel_config.html#a21a7a35f34515a950187415244d0ae7a">KernelConfig::usePersistentThreads</a></div><div class="ttdeci">int usePersistentThreads</div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00074">CudaTracerKernels.hpp:74</a></div></div>
<div class="ttc" id="struct_otrace_input_html"><div class="ttname"><a href="struct_otrace_input.html">OtraceInput</a></div><div class="ttdef"><b>Definition:</b> <a href="_cuda_tracer_kernels_8hpp_source.html#l00117">CudaTracerKernels.hpp:117</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_efcdd37e5809801e389fc22b12e0cfd9.html">rt</a></li><li class="navelem"><a class="el" href="dir_85556bcb1bd2819311192d512b70ea3e.html">kernels</a></li><li class="navelem"><a class="el" href="_cuda_tracer_kernels_8hpp.html">CudaTracerKernels.hpp</a></li>
    <li class="footer">Generated on Sat May 31 2014 15:56:20 for NTrace by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
